/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.6
*/
zingchart.setModule("color-scale"),zingchart.plugins.colorscale={},zingchart.plugins.colorscale.info={},zingchart.plugins.colorscale.defaults={box:{},item:{placement:"default","font-size":10,color:"#33"},label:{"font-size":10,color:"#33"},guide:{"line-color":"#fff","line-width":1},cursor:{type:"diamond",size:4,"background-color":"#000"}},zingchart.bind(null,"complete",function(a){zingchart.plugins.colorscale.paint(a)}),zingchart.plugins.colorscale.paint=function(a){var e=zingchart.getLoader(a.id),i=zingchart.getModules(e);if(-1!==ZC.AV(i,"color-scale"))for(var l=0,r=e.AG.length;l<r;l++){var t=e.AG[l];if(t.o["color-scale"]){var c=zingchart.plugins.colorscale.defaults,o=t.o["color-scale"]||{};o.guide=o.guide||{};var n,h=o.aspect||"gradient",s=o.intervals||4,g=o.layout||"v",p=o.color||"#369",u=o["max-percent"]||50,d=o.effect||"lighten",f=o.progression||"lin",_=ZC._f_(o["min-value"]||"0"),z=ZC._f_(o["max-value"]||"10"),m=o.steps||[],v=o.colors||[],x=o.labels||[],C=ZC._b_(o.mirrored);ZC._b_(o.map)&&(n=zingchart.maps.getMapByGraphIndex(a.id,t.L)._INFO_.choropleth)&&(h=n.aspect,s=n.intervals,p=n.color,u=n.maxPercent,d=n.effect,f=n.progression,_=n.minValue,z=n.maxValue,m=n.steps,v=n.colors,x=n.labels,C=n.mirrored),"v"===g?(o.margin=o.margin||"auto 10 auto auto",o.width=o.width||15,o.height=o.height||200,o["fill-angle"]=270):(o.margin=o.margin||"auto auto 35 auto",o.width=o.width||200,o.height=o.height||15,o["fill-angle"]=0);var Z=zingchart.getInstance(t,"box");Z.append(c.box),Z.append(o),Z.parse();var y,b,I,M,w,A="v"===g?Z.F:Z.I,G=[],F=null;if("gradient"===h){var k=Math.max(2,Math.ceil(A/("v"===g?30:60)));if("log"===f){for((M=Math.floor(ZC.G4(_,10)))===(w=Math.ceil(ZC.G4(z,10)))&&w++,y=M;y<=w;y+=1)G.push(Math.pow(10,y));if(G.length>k&&G.length%2==1)for(y=G.length-1;y>=0;y--)y%2==1&&G.splice(y,1)}else{I=ZC.AP.WE(_,z);for(var X=0;(I[1]-z)/I[2]>.5&&X<10;)I=ZC.AP.WE(_,z,Math.round(I[2]/2)),X++;for(F=I[3]<0?-I[3]:null,0===I[3]&&I[2]<1&&(F=1),y=I[0];y<=I[1];y+=I[2])G.push(y);if(G.length>1.5*k){if(G.length%2==1)for(y=G.length-1;y>=0;y--)y%2==1&&G.splice(y,1);if(G.length>1.5*k)for(var Y=!1;!Y;){for(Y=!0,G=[],y=(I=ZC.AP.WE(_,z,2*I[2]))[0];y<=I[1];y+=I[2])G.push(y);G.length>1.5*k&&(Y=!1)}}}}else{var L;if(m.length)s=m.length-1;else if("lin"===f){var K=(z-_)/s;for(b=0;b<s;b+=1)m.push(_+b*K);m.push(z)}else{for((M=Math.floor(ZC.G4(_,10)))===(w=Math.ceil(ZC.G4(z,10)))&&w++,s=Math.max(1,w-M-1),b=M;b<=w;b+=1)m.push(Math.pow(10,b));L=u/s}if(!v.length)for(b=0;b<=s;b+=1)v.push("lighten"===d?ZC.AO.QZ(p,b*L):ZC.AO.JK(p,b*L));G=[].concat(m)}var P=a.id+"_"+t.L;zingchart.plugins.colorscale.info[P]={aspect:h,min:G[0],max:G[G.length-1],progression:f,layout:g,x:Z.iX,y:Z.iY,width:Z.I,height:Z.F,steps:m};var j=0,O=0,E=zingchart.getInstance(t,"textbox");for(y=0;y<G.length;y++)E.append(c.item),E.append(o.item),E.o.text=G[y],E.parse(),j=Math.max(j,E.I),O=Math.max(O,E.F);var V,W,J=[],N=[];if(zingchart.exec(a.id,"removeobject",{graphid:t.K,type:"shape",cls:"zc-colorscale"}),zingchart.exec(a.id,"removeobject",{graphid:t.K,type:"label",cls:"zc-colorscale"}),"gradient"===h){V={flat:!0,cls:"zc-colorscale"};var Q=p,B="lighten"===d?ZC.AO.QZ(p,u):ZC.AO.JK(p,u);V["background-color"]=Q+" "+B,C&&(V["background-color"]=B+" "+Q),ZC._cp_(Z.o,V),V.id="colorscale_box",J.push(V)}else for(b=0;b<s;b+=1)V={flat:!0,cls:"zc-colorscale"},ZC._cp_(Z.o,V),V["background-color"]=v[b],V.id="colorscale_box_"+b,"h"===g?(V.x=Z.iX+b*Z.I/s,V.y=Z.iY,V.width=Z.I/s,V.height=Z.F):(V.x=Z.iX,V.y=Z.iY+Z.F-(b+1)*Z.F/s,V.width=Z.I,V.height=Z.F/s),ZC._cp_(o.marker,V),0===b&&(zingchart.plugins.colorscale.info[P].marker=[V.width,V.height]),V.margin=null,J.push(V),x[b]&&(W={flat:!0,cls:"zc-colorscale"},ZC._cp_(c.label,W),ZC._cp_(o.label,W),W.text=x[b],"h"===g?(W.width=Z.I/s,W.x=Z.iX+b*Z.I/s,W.y=Z.iY):(W.height=Z.F/s,W.x=Z.iX+Z.I+5,W.y=Z.iY+Z.F-(b+1)*Z.F/s),W.id="colorscale_label_"+b,J.push(W));var q,D,H,R,S=A/(G.length-1),T=[];for(y=0;y<G.length;y++){if(D={flat:!0,cls:"zc-colorscale"},ZC._cp_(c.item,D),ZC._cp_(o.item,D),H={decimals:F,short:!0,"thousands-separator":",","decimals-separator":"."},"log"===f){var U=Math.floor(ZC.G4(G[y],10));H.decimals=U<0?-U:0}ZC._cp_(o.item,H),R=zingchart.formatNumber(G[y],H);var $=ZC._i_(o.guide.size||("v"===g?Z.I:Z.F));"v"===g?(q=Z.iY+Z.F-S*y,T.push([Z.iX,q],[Z.iX+$,q],null),ZC._cp_({anchor:"l",width:j,align:"right",x:Z.iX-j-5,y:q,text:R},D)):(q=Z.iX+S*y,T.push([q,Z.iY],[q,Z.iY+$],null),ZC._cp_({anchor:"t",height:O,align:"center","vertical-align":"top",x:q,y:Z.iY+Z.F+5,text:R},D)),D.x-=t.iX,D.y-=t.iY,D.id="colorscale_item_"+y,J.push(D)}var aa={type:"line",flat:!0,cls:"zc-colorscale"};ZC._cp_(c.guide,aa),ZC._cp_(o.guide,aa),aa.id="colorscale_guide",aa.points=T,N.push(aa);var ea={flat:!0,visible:!1,cls:"zc-colorscale"};ZC._cp_(c.cursor,ea),ZC._cp_(o.cursor,ea),ea.id="colorscale_cursor";var ia=zingchart.plugins.colorscale.info[P].marker?zingchart.plugins.colorscale.info[P].marker[0]:Z.I,la=zingchart.plugins.colorscale.info[P].marker?zingchart.plugins.colorscale.info[P].marker[1]:Z.F;ea.x=Z.iX+ia/2-t.iX,ea.y=Z.iY+la/2-t.iY,N.push(ea),zingchart.exec(a.id,"addobject",{graphid:t.K,type:"label",data:J,dynamic:!0,update:!1}),zingchart.exec(a.id,"addobject",{graphid:t.K,type:"shape",dynamic:!0,data:N})}}},zingchart.plugins.colorscale.clear=function(a,e){a=a||"zc";var i=zingchart.getLoader(a);if(i){var l=zingchart.getGraph(i,e.graphid||"0");if(l){if(!zingchart.plugins.colorscale.info[a+"_"+l.L])return;zingchart.exec(a,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:{visible:!1}})}}},zingchart.plugins.colorscale.AGM=function(a,e){if(null!==ZC._n_(e.value)){a=a||"zc";var i=zingchart.getLoader(a);if(i){var l=zingchart.getGraph(i,e.graphid||"0");if(l){if(!zingchart.plugins.colorscale.info[a+"_"+l.L])return;var r,t,c,o=ZC._f_(e.value),n=zingchart.plugins.colorscale.info[a+"_"+l.L];if("gradient"===n.aspect)"lin"===n.progression?(r=(o-n.min)/(n.max-n.min),t="h"===n.layout?n.x+r*n.width:n.y+n.height-r*n.height):(r=(ZC.G4(o,10)-ZC.G4(n.min,10))/(ZC.G4(n.max,10)-ZC.G4(n.min,10)),t="h"===n.layout?n.x+r*n.width:n.y+n.height-r*n.height);else{var h=0;if(o===n.steps[n.steps.length-1])h=n.steps.length-2;else for(var s=0;s<n.steps.length-1;s++)o>=n.steps[s]&&o<n.steps[s+1]&&(h=s);r=("h"===n.layout?n.width:n.height)/(n.steps.length-1),t=n.marker?"h"===n.layout?n.x+r/2+r*h:n.y+n.height-r*h-r+n.marker[1]/2:"h"===n.layout?n.x+r/2+r*h:n.y+n.height-r*h+n.marker[0]/2}(c="h"===n.layout?{x:t-l.iX}:{y:t-l.iY}).visible=!0,("h"===n.layout&&(t<n.x||t>n.x+n.width)||"v"===n.layout&&(t<n.y||t>n.y+n.height))&&(c.visible=!1),zingchart.exec(a,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:c})}}}},zingchart.extendAPI("colorscale.setvalue",function(a,e){zingchart.plugins.colorscale.AGM(a,e)}),zingchart.extendAPI("colorscale.update",function(a,e){if(e.data){var i=zingchart.getLoader(a);if(i){var l=i.C8(e.graphid);l&&l.o["color-scale"]&&(ZC._todash_(e.data),ZC._cp_(e.data,l.o["color-scale"]),zingchart.plugins.colorscale.paint({id:a,graphid:l.K}))}}}),zingchart.extendAPI("colorscale.clear",function(a,e){zingchart.plugins.colorscale.clear(a,e)}),zingchart.extendAPI("colorscale.getinfo",function(a,e){var i=zingchart.getLoader(a);if(i){var l=i.C8(e.graphid);if(l)return zingchart.plugins.colorscale.info[a+"_"+l.L]}return null});