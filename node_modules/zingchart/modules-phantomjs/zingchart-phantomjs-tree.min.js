/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.6
*/
zingchart.setModule("tree"),function(){if(!ZC.ZCVector){ZC.ZCVector=function(e,i){this.fMagnitude=e,this.fDirection=i,this.fMagnitude<0&&(this.fMagnitude=-this.fMagnitude,this.fDirection=(180+this.fDirection)%360),this.fDirection<0&&(this.fDirection=360+this.fDirection)},ZC.ZCVector.add=function(e,i){var t=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),r=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);t+=i.fMagnitude*Math.cos(Math.PI/180*i.fDirection),r+=i.fMagnitude*Math.sin(Math.PI/180*i.fDirection);var n,a=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));return n=0===a?0:180/Math.PI*Math.atan2(r,t),new ZC.ZCVector(a,n)},ZC.ZCVector.sub=function(e,i){var t=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),r=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);t-=i.fMagnitude*Math.cos(Math.PI/180*i.fDirection),r-=i.fMagnitude*Math.sin(Math.PI/180*i.fDirection);var n,a=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));return n=0===a?0:180/Math.PI*Math.atan2(r,t),new ZC.ZCVector(a,n)},ZC.ZCVector.multiply=function(e,i){return new ZC.ZCVector(e.fMagnitude*i,e.fDirection)},ZC.ZCVector.prototype.toXY=function(){return[this.fMagnitude*Math.cos(Math.PI/180*this.fDirection),this.fMagnitude*Math.sin(Math.PI/180*this.fDirection)]};var e=function(e,i){var t=e.x-i.x,r=e.y-i.y;return Math.sqrt(Math.pow(t,2)+Math.pow(r,2))},i=function(e,i){var t=e.x+(i.x-e.x)/2,r=e.y+(i.y-e.y)/2,n=t-e.x,a=r-e.y;return 0===n&&0===a?0:0===n?a>=0?90:270:0===a?n>=0?0:180:Math.atan2(a,n)*(180/Math.PI)},t=function(t,r,n,a,l){var c=Math.max(e(r,n),1),s=Math.min(.99,t*(l||1))*(c-a);s=Math.max(s,-a),s=Math.min(s,a);var d=i(r,n);return new ZC.ZCVector(s,d)},r=function(t,r,n,a,l,c,s,d){var o=Math.max(e(r,n),1),h=r.size||1,g=n.size||1;if(s||(h=g=1),d&&(c=1),o>c*a)return new ZC.ZCVector(0,0);var p=-t*h*g/(o*o*l);p=Math.max(p,-a),p=Math.min(p,a);var u=i(r,n);return new ZC.ZCVector(p,u)},n=function(e){for(var i=zingchart.plugins.tree[e].data,t=Number.MAX_VALUE,r=-Number.MAX_VALUE,n=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=0;l<i.length;l++)"link"===i[l].type?(n=Math.min(n,i[l].value),a=Math.max(a,i[l].value)):(t=Math.min(t,i[l].value),r=Math.max(r,i[l].value));zingchart.plugins.tree[e].minValue=t,zingchart.plugins.tree[e].maxValue=r,zingchart.plugins.tree[e].minLinkValue=n,zingchart.plugins.tree[e].maxLinkValue=a};zingchart.plugins.tree=zingchart.plugins.tree||{},zingchart.plugins.tree.graph_defaults={plotarea:{margin:5},container:{padding:5},node:{type:"circle","border-width":1,"border-color":"#fff",tooltip:{text:"%text"},label:{"font-size":10,padding:1,color:"#000",text:"%text"}},link:{flat:!0,"line-color":"#999",alpha:.5,type:"line"}},zingchart.plugins.tree.orgchart_defaults={plotarea:{margin:10},container:{"tree-right":{padding:"20 60 20 60"},"tree-left":{padding:"20 60 20 60"},"tree-down":{padding:"20 60 20 60"},"tree-up":{padding:"20 60 20 60"}},node:{type:"rectangle",width:80,height:30,"border-width":1,"border-color":"#333","background-color":"#fff",label:{color:"#000",width:80,"font-size":10,align:"center",anchor:"c",text:"%text"}},link:{aspect:"split","line-color":"#999","line-width":1}},zingchart.plugins.tree.tree_defaults={plotarea:{margin:10},container:{"tree-radial":{padding:"120 120 120 120"},"tree-right":{padding:"20 120 20 40"},"tree-left":{padding:"20 40 20 120"},"tree-down":{padding:"40 20 120 20"},"tree-up":{padding:"120 20 40 20"}},link:{aspect:"arc","line-color":"#999","line-width":1},"node[collapsed]":{"border-width":1,"border-color":"#666"},node:{type:"circle",tooltip:{text:"%text:%value"},label:{"font-size":10,padding:1,width:100,color:"#000","clip-text":!0,text:"%text"},label_jsRule:function(e,i,t){var r={},n=ZC._i_(i.label.width)/2,a=null!==ZC._n_(i.width)?ZC._i_(i.width)/2:i.size,l=null!==ZC._n_(i.height)?ZC._i_(i.height)/2:i.size,c=Math.max(a,l);switch(t){case"tree-right":0===e.level?r["offset-y"]=-i.size-l:(r.anchor=e.children&&e.children.length?"r":"l",r["offset-x"]=e.children&&e.children.length?-5-a:5+a,r.align=e.children&&e.children.length?"right":"left");break;case"tree-left":0===e.level?r["offset-y"]=-i.size-l:(r.anchor=e.children&&e.children.length?"l":"r",r["offset-x"]=e.children&&e.children.length?5+a:-5-a,r.align=e.children&&e.children.length?"left":"right");break;case"tree-down":r.anchor="c",0===e.level?r["offset-y"]=-i.size-l:(r["offset-y"]=e.children&&e.children.length?-5-n-l:5+n+l,r.angle=91,r.align=e.children&&e.children.length?"right":"left",r["offset-x"]=e.children&&e.children.length?1:0);break;case"tree-up":r.anchor="c",0===e.level?r["offset-y"]=i.size+l:(r["offset-y"]=e.children&&e.children.length?5+n+l:-5-n-l,r.angle=271,r.align=e.children&&e.children.length?"right":"left",r["offset-x"]=e.children&&e.children.length?-1:0);break;case"tree-radial":var s,d;0===e.level?r["offset-y"]=-i.size-l:(e.children&&e.children.length?(e.angle>90&&e.angle<270?(r.angle=e.angle+180,r.align="left"):(r.angle=e.angle,r.align="right"),s=ZC.AP.BM(e.cx,e.cy,e.radius,e.angle),d=ZC.AP.BM(e.cx,e.cy,e.radius-(5+n+c),e.angle)):(e.angle>90&&e.angle<270?(r.angle=e.angle+180,r.align="right"):(r.angle=e.angle,r.align="left"),s=ZC.AP.BM(e.cx,e.cy,e.radius,e.angle),d=ZC.AP.BM(e.cx,e.cy,e.radius+(5+n+c),e.angle)),r["offset-x"]=d[0]-s[0],r["offset-y"]=d[1]-s[1])}for(var o in r)null!==ZC._n_(i.label[o])&&delete r[o];return r}}},zingchart.bind(null,"dataparse",function(e,i){for(var t,r,n,a,l=0,c=i.graphset.length;l<c;l++)if(i.graphset[l].type&&"tree"===i.graphset[l].type){var s=i.graphset[l].type;i.graphset[l]["plugin-type"]=s;var d=i.graphset[l];zingchart.normalize(d),d.type="null";var o={};d.options&&(o=d.options[s]||d.options),ZC._todash_(o),d.series=d.series||[];var h=o["text-attr"]||"text",g=o["value-attr"]||"value",p=o["source-attr"]||"source",u=o["target-attr"]||"target",_=o.aspect||"tree-right",f=ZC._b_(ZC._c_(o["org-chart"],0));if(d.plotarea=d.plotarea||{},f?ZC._inj_(d.plotarea,zingchart.plugins.tree.orgchart_defaults.plotarea||{}):"graph"===_?ZC._inj_(d.plotarea,zingchart.plugins.tree.graph_defaults.plotarea||{}):ZC._inj_(d.plotarea,zingchart.plugins.tree.tree_defaults.plotarea||{}),!(d.series instanceof Array)){var v=[],x={},C=function(e,i){var t=(e.text||e.name||e[h]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");x[t]?t+=x[t]++:x[t]=1;var r={id:t,text:e.text||e.name||e[h]||t,value:e.value||e.size||e[g],parent:i||""};if(v.push(r),e.children)for(var n=0;n<e.children.length;n++)C(e.children[n],t)};C(d.series),d.series=v}for(t=0;t<d.series.length;t++)d.series[t].text=d.series[t].text||d.series[t].name||d.series[t][h]||"Node "+t,d.series[t].value=d.series[t].value||d.series[t].size||d.series[t][g],d.series[t]["node-value"]=d.series[t].value,d.series[t].id||(d.series[t].text?d.series[t].id=d.series[t].text.toLowerCase().replace(/[^a-z0-9_]+/gi,""):d.series[t].id="node"+t),d.series[t].group=d.series[t].group||-1,"graph"!==_?(d.series[t].collapsed=!1,d.series[t].visible=!0):(d.series[t].text=d.series[t].text||d.series[t].name||d.series[t][h]||"Node "+t,(d.series[t].source||d.series[t].from||d.series[t][p])&&(d.series[t].target||d.series[t].to||d.series[t][u])?(d.series[t].source=d.series[t].source||d.series[t].from||d.series[t][p],d.series[t].target=d.series[t].target||d.series[t].to||d.series[t][u],d.series[t].type="link"):d.series[t].type="node"),"graph"===_&&d.series[t].parent&&""!==d.series[t].parent&&d.series.push({type:"link",source:d.series[t].id,target:d.series[t].parent,value:1});for(zingchart.plugins.tree[e.id]=zingchart.plugins.tree[e.id]||{},zingchart.plugins.tree[e.id].size=d.series.length,t=0;t<d.series.length;t++)if(d.series[t].idx=t,null!==ZC._n_(d.series[t].parent))for(r=0;r<d.series.length;r++)d.series[r].id===d.series[t].parent&&(d.series[t].pidx=r,d.series[r].children=d.series[r].children||[],d.series[r].children.push(t));else d.series[t].parent="";for(var Z=!0,z=[];Z;)for(Z=!1,t=0;t<d.series.length;t++)if(null!==ZC._n_(d.series[t].parent)&&(n=d.series[t].parent,-1===ZC.AV(z,n))){var m=0,M=!0;for(a=-1,r=0;r<d.series.length;r++)d.series[r].id===n&&(a=r,d.series[t].pidx=r),null!==ZC._n_(d.series[r].parent)&&d.series[r].parent===n&&(null!==ZC._n_(d.series[r].value)?m+=ZC._f_(d.series[r].value):M=!1);if(M&&-1!==a){null!==ZC._n_(d.series[a].value)&&(d.series[a]["node-value"]=d.series[a].value),d.series[a].value=m,z.push(n),Z=!0;continue}}for(t=0;t<d.series.length;t++)d.series[t].value=d.series[t].value||1,"graph"===_&&(d.series[t].container=d.series[t].container||0);for(var b=!0,y=Number.MAX_VALUE,w=-Number.MAX_VALUE,k=0;b;)for(b=!1,t=0;t<d.series.length;t++)"graph"===_&&"node"!==d.series[t].type||(y=Math.min(y,d.series[t].value),w=Math.max(w,d.series[t].value)),null===ZC._n_(d.series[t].level)?d.series[t].sibling||null!==ZC._n_(d.series[t].parent)&&""!==d.series[t].parent?(a=d.series[t].pidx,null!==ZC._n_(a)?null===ZC._n_(d.series[a].level)?b=!0:(d.series[t].level=ZC._i_(d.series[a].level)+1,"graph"!==_&&(d.series[t].container=d.series[a].container)):d.series[t].container=d.series[t].level=0):(d.series[t].level=0,"graph"!==_&&(d.series[t].container=k),k++):(a=d.series[t].pidx,null!==ZC._n_(a)?d.series[t].container=d.series[a].container||0:d.series[t].container=0);if(zingchart.plugins.tree[e.id].minValue=y,zingchart.plugins.tree[e.id].maxValue=w,"graph"===_){var V=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(t=0;t<d.series.length;t++)"link"===d.series[t].type&&(V=Math.min(V,d.series[t].value),A=Math.max(A,d.series[t].value));zingchart.plugins.tree[e.id].minLinkValue=V,zingchart.plugins.tree[e.id].maxLinkValue=A}d.plotarea=d.plotarea||{},ZC._inj_(d.plotarea,{margin:"10 10 10 10","mask-tolerance":[0,0]})}return i});var a=function(n){var a=zingchart.getLoader(n.loader.id),l=zingchart.getGraph(a,n.graphid),c=l.o;if("tree"===c["plugin-type"]){var s,d,o,h=zingchart.getGraphInfo(a,c,l.L).plotarea,g={};c.options&&(g=c.options.tree||c.options),ZC._todash_(g);var p=g.palette||["#a7da47","#00b0e1","#ef4810","#f9c332","#84680a","#4d62b1","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],u=g.aspect||"tree-right",_=ZC._b_(ZC._c_(g["org-chart"],0)),f=g.layout||"x",v=ZC._i_(ZC._c_(g.progression,"0")),x=ZC._i_(ZC._c_(g.aperture,"360")),C=ZC._i_(ZC._c_(g["ref-angle"],"0")),Z=ZC._i_(ZC._c_(g["min-size"],4)),z=ZC._i_(ZC._c_(g["max-size"],4)),m=ZC._i_(ZC._c_(g["min-link-width"],1)),M=ZC._i_(ZC._c_(g["max-link-width"],5)),b=ZC._f_(ZC._c_(g["attraction-constant"],.99)),y=ZC._i_(ZC._c_(g["repulsion-constant"],1e3)),w=ZC._i_(ZC._c_(g["repulsion-distance-factor"],20)),k=ZC._f_(ZC._c_(g["spring-length"],40)),V=ZC._i_(ZC._c_(g["max-iterations"],1e3)),A=ZC._f_(ZC._c_(g["damping-step"],.005)),L=ZC._b_(ZC._c_(g["weighted-nodes"],0)),X=ZC._b_(ZC._c_(g["weighted-links"],0)),P=Math.max(1,ZC._i_(ZC._c_(g["packing-factor"],1))),E=Math.max(.1,ZC._f_(ZC._c_(g["depth-ratio"],2))),I=ZC._b_(ZC._c_(g["weighted-links"],0));_&&(I=!0),zingchart.plugins.tree[n.id].data=[].concat(c.series||[]),zingchart.plugins.tree[n.id].attractionConstant=b,zingchart.plugins.tree[n.id].repulsionConstant=y,zingchart.plugins.tree[n.id].springLength=k;var N,j,D=function(e,i){var t=zingchart.plugins.tree[n.id].data;if(t[e].children)for(var r=0;r<t[e].children.length;r++)t[t[e].children[r]].coord+=i,D(t[e].children[r],i)},Y=function(e){var i=zingchart.plugins.tree[n.id].data,t=!1,r=-1,a=-1;if(null===ZC._n_(i[e].pidx))t=!0;else{var l=ZC.AV(i[i[e].pidx].children,e);0===l?t=!0:(t=!1,r=l-1,a=i[i[e].pidx].children[r])}return{first:t,prevSiblingIndex:r,prevIndex:a}},U=function(e,i){var t=zingchart.plugins.tree[n.id].data,r=[];if(r.push(e),t[e].children&&t[e].children.length&&(i||!t[e].collapsed))for(var a=0;a<t[e].children.length;a++)r=r.concat(U(t[e].children[a]));return r},F=function(e){for(var i=zingchart.plugins.tree[n.id].data,t=Number.MAX_VALUE,r=0;r<e.length;r++)t=Math.min(t,i[e[r]].coord);return t},R=function(e){for(var i=zingchart.plugins.tree[n.id].data,t=-Number.MAX_VALUE,r=0;r<e.length;r++)t=Math.max(t,i[e[r]].coord);return t},B=null,S=function(){var e,i=zingchart.plugins.tree[n.id].data;if(!B)for(B={},e=0;e<i.length;e++)B[i[e].id]=i[e].idx;var t={};for(e=0;e<i.length;e++){if(i[e].reference){var r=i[B[i[e].reference]];t[i[e].reference]=t[i[e].reference]||1,i[e].coord=r.coord,i[e].level=r.level+t[i[e].reference],t[i[e].reference]+=1}if(i[e].sibling&&0===i[e].level){var a=i[B[i[e].sibling]];i[e].idx<a.idx?i[e].coord=a.coord-P:i[e].coord=a.coord+P}}T()},q=0,T=function(){for(var e=zingchart.plugins.tree[n.id].data,i=0;i<e.length;i++)e[i].visible&&(q=Math.max(q,c.series[i].level))},O=function(e,i){var t=zingchart.plugins.tree[n.id].data;if(t[e].visible&&(t[e].reference?t[e].coord=0:t[e].coord=i*P,t[e].children))for(var r=0;r<t[e].children.length;r++)O(t[e].children[r],r*P)},G=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&!i[e].reference&&i[e].children&&!i[e].collapsed){var t=i[e].children.length,r=i[e].children[0],a=i[e].children[t-1],l=(i[r].coord+i[a].coord)/2,c=Y(e),s=c.first,d=c.prevSiblingIndex;if(s)i[e].coord=l;else{var o=i[i[e].pidx].children[d];i[e].coord=i[o].coord+P;var h=i[e].coord-l;0!==h&&D(e,h)}}},J=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&!i[e].reference){var t=Y(e),r=t.first,a=t.prevIndex;if(!r){var l=function(e,i,t){var r=zingchart.plugins.tree[n.id].data,a=[];if(i){for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[r[e].children.length-1];for(;null!==ZC._n_(r[e].pidx);)(-1===t||r[e].level<=t)&&a.push(e),e=r[e].pidx}if(a.push(e),!i)for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[r[e].children.length-1],(-1===t||r[e].level<=t)&&a.push(e);return a}(a,!1,-1),c=function(e,i,t){var r=zingchart.plugins.tree[n.id].data,a=[];if(i){for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[0];for(;null!==ZC._n_(r[e].pidx);)(-1===t||r[e].level<=t)&&a.push(e),e=r[e].pidx}if(a.push(e),!i)for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[0],(-1===t||r[e].level<=t)&&a.push(e);return a}(e,!1,-1),s=R(l),d=F(c),o=0;d<=s&&(o=s-d+P,i[e].coord+=o,D(e,o))}if(i[e].children&&i[e].children.length&&!i[e].collapsed)for(var h=0;h<i[e].children.length;h++)J(i[e].children[h])}},K=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&i[e].children&&!i[e].collapsed){for(var t=i[e].children.length,r=i[e].children[0],a=i[e].children[t-1],l=(i[r].coord+i[a].coord)/2,c=i[e].coord-l,s=0;s<i.length;s++)i[s].sibling===i[e].id&&(i[s].coord-=c);i[e].coord=l}},Q=function(e){var i=zingchart.plugins.tree[n.id].data,t=0;if(!i[e].visible)return t;if(i[e].children&&i[e].children.length>1&&!i[e].collapsed)for(var r="r",a=1;a<i[e].children.length;a++){var l=i[i[e].children[a]],c=i[i[e].children[a-1]];c.children&&c.children.length?l.children&&l.children.length||(r="l",l.coord-c.coord>P&&(l.coord=c.coord+P,t++)):l.children&&l.children.length?(r="r",l.coord-c.coord>P&&(c.coord=l.coord-P,t++)):l.coord-c.coord>P&&("r"===r?(c.coord=l.coord-P,t++):(l.coord=c.coord+P,t++))}return t},H=function(e){var i=zingchart.plugins.tree[n.id].data,t=Y(e),r=t.first,a=t.prevIndex;if(!r){var l=U(a),c=U(e),s=R(l),d=F(c),o=0;d>s+P&&(o=d-s-P,i[e].coord+=-o,D(e,-o))}},W=[],$=[],ee=[],ie=[],te=[],re=[],ne={},ae={},le={},ce=1,se=0,de="",oe=[0,0],he=!1,ge={},pe=!0,ue=!0,_e=zingchart.getInstance(l,"textbox");_?_e.append(zingchart.plugins.tree.orgchart_defaults.container[u]):"graph"===u?_e.append(zingchart.plugins.tree.graph_defaults.container):_e.append(zingchart.plugins.tree.tree_defaults.container[u]),_e.append(g.container),_e.parse();var fe=_e.FL,ve=_e.FM,xe=_e.FS,Ce=_e.EP,Ze=function(e){if(W=[],e>1){var i=-1,t=-1;if("h"===f)i=1,t=e;else if("v"===f)i=e,t=1;else if(-1!==f.indexOf("x")){var r=f.split("x");""!==r[0]&&(i=ZC._i_(r[0])),""!==r[1]&&(t=ZC._i_(r[1])),-1===i&&-1===t?i=t=Math.ceil(Math.sqrt(e)):-1===i&&-1!==t?i=Math.ceil(e/t):-1!==i&&-1===t&&(t=Math.ceil(e/i))}for(var n=h.width/t,a=h.height/i,l=0;l<i;l++)for(var c=0;c<t;c++)W[l*t+c]={x:h.x+c*n,y:h.y+l*a,width:n,height:a}}else W[0]={x:h.x,y:h.y,width:h.width,height:h.height}};zingchart.plugins.tree[n.id].bFirstRender=!0;var ze={},me=function(l){if(a.SS=[],b=zingchart.plugins.tree[n.id].attractionConstant,y=zingchart.plugins.tree[n.id].repulsionConstant,k=zingchart.plugins.tree[n.id].springLength,!l||(ce=1,se=0,!he)){he=!0;var c,d,o=zingchart.plugins.tree[n.id].data,h=te.length,g=re.length,p=0,u=0,_=[];""!==de&&(o[ne[de]].x=oe[0],o[ne[de]].y=oe[1]);var f,v=[];for(s=0;s<h;s++)if(c=o[te[s]],f=W[c.container],v[c.container]||(v[c.container]={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE}),c.id!==de){var x,C={x:f.x+f.width/2,y:f.y+f.height/2},Z={x:f.x+f.width/2,y:f.y+f.height/2},z=k,P=1,E="";null!==ZC._n_(c.level)&&c.level>0&&z>20&&(z=Math.round(Math.max(20,z-5*c.level)));var I=new ZC.ZCVector(e(C,c),i(C,c)),N=new ZC.ZCVector(0,0),j=new ZC.ZCVector(0,0);for(d=0;d<h;d++)if(s!==d&&c.container===o[te[d]].container){P=1,x=z,E=c.id+"-"+o[te[d]].id,Me[E]&&(x=Me[E]),X&&o[le[E]]&&zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(P+=Math.round((M-m)*(o[le[E]].value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue)));var D=r(y,c,o[te[d]],x,P,w,L,o[le[E]]?1:0);j=ZC.ZCVector.add(j,D)}if(c.level){var Y=r(y,c,Z,z,P,10*w,L,0);j=ZC.ZCVector.add(j,Y)}N=ZC.ZCVector.add(N,j);var U=!1,F=new ZC.ZCVector(0,0);if(ae[c.id])for(d=0;d<ae[c.id].length;d++){P=1,x=z,E=c.id+"-"+o[ne[ae[c.id][d]]].id,Me[E]&&(x=Me[E]),X&&(P=m,zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(P+=Math.round((M-m)*(o[le[E]].value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue))));var R=t(b,c,o[ne[ae[c.id][d]]],x,P);R.fMagnitude/=2,F=ZC.ZCVector.add(F,R),o[ne[ae[c.id][d]]].id===de&&(U=!0)}else{var B=t(b,c,Z,z,1);F=ZC.ZCVector.add(F,B)}if(ae[c.id]?(F.fMagnitude>z/10||ae[c.id].length>1)&&(F=ZC.ZCVector.multiply(F,Math.min(1,(U?2.5:1)/ae[c.id].length))):F.fMagnitude=Math.min(5*(U?2.5:1),F.fMagnitude),c.cg){var S=t(999*b,c,c.cg,5,1);F=ZC.ZCVector.add(F,S)}N=ZC.ZCVector.add(N,F),N=ZC.ZCVector.multiply(N,ce);var q=(I=ZC.ZCVector.add(I,N)).toXY(),T=e(c,{x:f.x+f.width/2+q[0],y:f.y+f.height/2+q[1]});p+=T,u=Math.max(u,T),c.__x=f.x+f.width/2+q[0],c.__y=f.y+f.height/2+q[1]}for(s=0;s<h;s++)(c=o[te[s]]).id!==de&&(c.x=c.__x,c.y=c.__y),v[c.container].minX=Math.min(v[c.container].minX,c.x),v[c.container].maxX=Math.max(v[c.container].maxX,c.x),v[c.container].minY=Math.min(v[c.container].minY,c.y),v[c.container].maxY=Math.max(v[c.container].maxY,c.y);var O=0,G=[];for(s=0;s<v.length;s++)G[s]=1,v[s].maxX-v[s].minX>W[s].width&&(G[s]=Math.min(G[s],W[s].width/(v[s].maxX-v[s].minX))),v[s].maxY-v[s].minY>W[s].height&&(G[s]=Math.min(G[s],W[s].height/(v[s].maxY-v[s].minY))),v[s].diffX=W[s].x+W[s].width/2-(v[s].maxX+v[s].minX)/2,v[s].diffY=W[s].y+W[s].height/2-(v[s].maxY+v[s].minY)/2,O+=e({x:W[s].x+W[s].width/2,y:W[s].y+W[s].height/2},{x:(v[s].maxX+v[s].minX)/2,y:(v[s].maxY+v[s].minY)/2});var J={};for(s=0;s<h;s++)(c=o[te[s]]).cg||(""===de?(c.x+=v[c.container].diffX/k,c.y+=v[c.container].diffY/k):o[ne[de]].container!==c.container&&(c.x+=v[c.container].diffX/k,c.y+=v[c.container].diffY/k)),ze[c.id]&&(c.x=ze[c.id][0]||c.x,c.y=ze[c.id][1]||c.y),1!==G[c.container]?(c._x_=W[c.container].x+W[c.container].width/2+(c.x-W[c.container].x-W[c.container].width/2)*G[c.container],c._y_=W[c.container].y+W[c.container].height/2+(c.y-W[c.container].y-W[c.container].height/2)*G[c.container]):(c._x_=c.x,c._y_=c.y),ge[c.id]=[c._x_,c._y_],J={id:"node_"+c.id,x:c._x_,y:c._y_},15===se&&(J.visible=pe),_.push(J);for(s=0;s<g;s++){c=o[re[s]];var K=o[ne[c.source]],Q=o[ne[c.target]];J={id:"link_"+K.id+"_"+Q.id,points:[[K._x_,K._y_],[Q._x_,Q._y_]]},15===se&&(J.visible=ue),_.push(J)}zingchart.exec(n.id,"updateobject",{type:"shape",data:_}),++se<15||se<V&&(p>1&&u>.1||O>2)?(ce=Math.max(.001,ce-A),window.setTimeout(me,1)):he=!1}},Me={},be=zingchart.plugins.tree[n.id]._render_graph_=function(){zingchart.exec(n.id,"removeobject",{type:"shape",cls:"zctreeshape"}),ee=[],ie=[],te=[],re=[],ne={},ae={},le={};var e,i=zingchart.plugins.tree[n.id].data,t=!1,r=[],a=0;for(s=0;s<i.length;s++)((e=i[s]).parent||e.children)&&(t=!0),"node"===e.type?(te.push(s),ne[e.id]=s,r[e.container]||(r[e.container]=[],a++),r[e.container].push(s)):(re.push(s),ae[e.source]=ae[e.source]||[],ae[e.source].push(e.target),ae[e.target]=ae[e.target]||[],ae[e.target].push(e.source),le[e.source+"-"+e.target]=s,le[e.target+"-"+e.source]=s);Ze(a);for(var l={},c=0;c<W.length;c++){var d=W[c];if(r[c]=r[c]||[],r[c].length){var o=[d.x+d.width/2,d.y+d.height/2];if(t)for(var h={},u=0;u<r[c].length;u++)if((e=i[r[c][u]]).parent){var _=i[ne[e.parent]];if(_){var f=l[_.id],v=ZC.AP.BM(f[0],f[1],Math.max(25,60-5*_.level),h[e.parent]);l[e.id]=[v[0],v[1]];var x=15;e.level<=1&&(x=360/Math.max(1,(_.children||[]).length)),h[e.id]||(h[e.id]=h[_.id],e.children&&_.children.length>1&&(h[e.id]-=15*(e.children.length-1)/2)),h[_.id]+=x}}else l[e.id]=[o[0],o[1]],h[e.id]=1;else for(var C=Math.ceil(Math.sqrt(r[c].length)),b=Math.min(10,Math.round(d.width/C)),y=b*C,w=Math.min(10,Math.round(d.height/C)),k=w*C,V=0;V<C;V++)for(var A=0;A<C;A++){var L=V*C+A;L<r[c].length&&(l[i[r[c][L]].id]=[o[0]-y/2+A*b,o[1]-k/2+V*w])}}}for(s=0;s<te.length;s++){e=i[te[s]],ge[e.id]?(e.x=ge[e.id][0],e.y=ge[e.id][1]):(e.x=l[e.id][0],e.y=l[e.id][1]);var X=Z;zingchart.plugins.tree[n.id].maxValue!==zingchart.plugins.tree[n.id].minValue&&(X+=Math.round((z-Z)*(e.value-zingchart.plugins.tree[n.id].minValue)/(zingchart.plugins.tree[n.id].maxValue-zingchart.plugins.tree[n.id].minValue))),e.size=1+.5*X/z;var P,E=ZC._i_(-1!==e.group?e.group:e.level||"0"),I={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.node,I),ZC._cp_({id:"node_"+e.id,cls:"zctreeshape","background-color":p[E%p.length],size:X},I),ZC._cp_(g.node||{},I),ZC._cp_(g["node[group-"+e.group+"]"],I),ZC._cp_(g["node[container-"+e.container+"]"],I),e.cls)for(var N=e.cls.split(/\s/),j=0;j<N.length;j++)ZC._cp_(g["node[cls-"+N[j]+"]"],I);if(g.nodes&&g.nodes[e.id]&&ZC._cp_(g.nodes[e.id],I),I["js-rule"])try{var D=ZC.execFn(I["js-rule"].replace("javascript:","").replace("()",""),window,n.id,e,I);D&&ZC._cp_(D,I)}catch(q){}e.style&&ZC._cp_(e.style,I);var Y={decimals:null,short:!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(I,Y),I.label&&I.label.text){for(P in I.label.text=I.label.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],Y)).replace(/%value/gi,zingchart.formatNumber(e.value,Y)),e)"data-"===P.substring(0,5)&&(I.label.text=I.label.text.replace(new RegExp("%"+P,"g"),e[P]));I.label.text=I.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(I.tooltip&&I.tooltip.text){for(P in ZC._cp_(I.tooltip,Y),I.tooltip.text=I.tooltip.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],Y)).replace(/%value/gi,zingchart.formatNumber(e.value,Y)),e)"data-"===P.substring(0,5)&&(I.tooltip.text=I.tooltip.text.replace(new RegExp("%"+P,"g"),e[P]));I.tooltip.text=I.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}zingchart.plugins.tree[n.id].bFirstRender&&(null===ZC._n_(I.visible)||I.visible||(pe=!1),I.visible=!1),null!==ZC._n_(I.x)||null!==ZC._n_(I.y)?(ze[e.id]=[0,0],null!==ZC._n_(I.x)?(I.x=ZC._i_(I.x),ze[e.id][0]=I.x):I.x=e.x,null!==ZC._n_(I.y)?(I.y=ZC._i_(I.y),ze[e.id][1]=I.y):I.y=e.y):(I.x=e.x,I.y=e.y),ee.push(I)}for(s=0;s<re.length;s++){e=i[re[s]];var U=i[ne[e.source]],F=i[ne[e.target]],R=m;zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(R+=Math.round((M-m)*(e.value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue)));var B={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.link,B),ZC._cp_({id:"link_"+U.id+"_"+F.id,cls:"zctreeshape","fast-vector-path":!0,"line-width":R,points:[[U.x,U.y],[F.x,F.y]]},B),ZC._cp_(g.link||{},B),ZC._cp_(g["link[group-"+U.group+"]"],B),ZC._cp_(g["link[container-"+U.container+"]"],B),ZC._cp_(g["link[source-"+U.id+"]"],B),ZC._cp_(g["link[target-"+F.id+"]"],B),e.cls&&ZC._cp_(g["link[cls-"+e.cls+"]"],B),B["js-rule"])try{var S=ZC.execFn(B["js-rule"].replace("javascript:","").replace("()",""),window,n.id,e,U,F,B);S&&ZC._cp_(S,B)}catch(q){}g.links&&g.links[U.id+"-"+F.id]&&ZC._cp_(g.links[U.id+"_"+F.id],B),zingchart.plugins.tree[n.id].bFirstRender&&(null===ZC._n_(B.visible)||B.visible||(ue=!1),B.visible=!1),B.length&&(Me[U.id+"-"+F.id]=Me[F.id+"-"+U.id]=B.length),ie.push(B)}zingchart.exec(n.id,"addobject",{type:"shape",data:ie.concat(ee)}),zingchart.plugins.tree[n.id].bFirstRender=!1,window.setTimeout(function(){me(!0)},1)},ye=function(){a.SS=[],W=[],$=[],ee=[],ie=[];var e=zingchart.plugins.tree[n.id].data,i=[],t=[];for(s=0;s<e.length;s++)0!==e[s].level||e[s].sibling||(i.push(e[s]),t.push(s));T();var r,l,c,h={};for(s=0;s<e.length;s++)h[e[s].container+"-"+e[s].level]=h[e[s].container+"-"+e[s].level]||[],h[e[s].container+"-"+e[s].level].push(e[s].idx);Ze(i.length);for(var f=0;f<W.length;f++)if(i[f]){for(s=0;s<t.length;s++)s===f&&O(t[s],s);for(S(),d=q;d>=0;d--)if(h[f+"-"+d])for(s=0;s<h[f+"-"+d].length;s++)G(h[f+"-"+d][s]);for(S(),s=0;s<t.length;s++)J(t[s]);for(S(),d=q-1;d>=0;d--)if(h[f+"-"+d])for(s=0;s<h[f+"-"+d].length;s++)K(h[f+"-"+d][s]);for(S(),d=q-1;d>=0;d--)if(h[f+"-"+d])for(var m=1,M=0;m>0&&M<128;){for(m=0,s=0;s<h[f+"-"+d].length;s++)m+=Q(h[f+"-"+d][s]);M++}for(S(),s=0;s<e.length;s++)if(e[s].container===f&&e[s].children)for(o=1;o<e[s].children.length;o++)H(e[s].children[o]);for(S(),d=q-1;d>=0;d--)if(h[f+"-"+d])for(s=0;s<h[f+"-"+d].length;s++)K(h[f+"-"+d][s]);S();var b=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(s=0;s<e.length;s++)e[s].container===f&&(""!==e[s].parent?e[s].visible&&e[e[s].pidx].visible&&$.push([e[s].pidx,e[s].idx]):e[s].sibling&&null===ZC._n_(e[s].pidx)&&null!==ZC._n_(B[e[s].sibling])&&$.push([B[e[s].sibling],e[s].idx]),e[s].visible&&(b=Math.min(b,e[s].coord),y=Math.max(y,e[s].coord)));b===y&&(y=b+P);var w,k=W[f],V=function(e){for(var i=0,t=e;t>=0;t--)i+=Math.pow(2,t);return i};switch(u){case"tree-radial":r=Math.min(k.width-ve-Ce,k.height-fe-xe)/(2*Math.max(q,1)),0!==v&&(r=Math.pow(2,q-1)*Math.min(k.width-ve-Ce,k.height-fe-xe)/V(q-1));break;case"tree-down":case"tree-up":r=(k.height-fe-xe)/Math.max(q,1),0!==v&&(r=Math.pow(2,q-1)*(k.height-fe-xe)/V(q-1));break;case"tree-left":case"tree-right":r=(k.width-ve-Ce)/Math.max(q,1),0!==v&&(r=Math.pow(2,q-1)*(k.width-Ce-ve)/V(q-1))}for(s=0;s<e.length;s++)if(e[s].visible&&e[s].container===f)switch(u){case"tree-right":if(w=(k.height-fe-xe)/(y-b),e[s].y=k.y+fe+(e[s].coord-b)*w,0===q&&(e[s].y+=k.height/2),e[s].x=k.x+Ce,0===v)e[s].x+=e[s].level*r;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].x+=r*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].x+=r*Math.pow(2,-q+d+1);break;case"tree-left":if(w=(k.height-fe-xe)/(y-b),e[s].y=k.y+fe+(e[s].coord-b)*w,0===q&&(e[s].y+=k.height/2),e[s].x=k.x+k.width-ve,0===v)e[s].x-=e[s].level*r;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].x-=r*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].x-=r*Math.pow(2,-q+d+1);break;case"tree-down":if(w=(k.width-ve-Ce)/(y-b),e[s].x=k.x+Ce+(e[s].coord-b)*w,0===q&&(e[s].x+=k.width/2),e[s].y=k.y+fe,0===v)e[s].y+=e[s].level*r;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].y+=r*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].y+=r*Math.pow(2,-q+d+1);break;case"tree-up":if(w=(k.width-ve-Ce)/(y-b),e[s].x=k.x+Ce+(e[s].coord-b)*w,0===q&&(e[s].x+=k.width/2),e[s].y=k.y+k.height-xe,0===v)e[s].y-=e[s].level*r;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].y-=r*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].y-=r*Math.pow(2,-q+d+1);break;case"tree-radial":if(w=x/(y-b+1),e[s].angle=C+(e[s].coord-b)*w,e[s].radius=0,0===v)e[s].radius+=e[s].level*r;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].radius+=r*Math.pow(2,-d-1);else if(1===v)for(d=0;d<e[s].level;d++)e[s].radius+=r*Math.pow(2,-q+d);e[s].cx=k.x+Ce+(k.width-Ce-ve)/2,e[s].cy=k.y+fe+(k.height-fe-xe)/2,N=ZC.AP.BM(e[s].cx,e[s].cy,e[s].radius,e[s].angle),e[s].x=N[0],e[s].y=N[1]}}var A={},L=_?zingchart.plugins.tree.orgchart_defaults:zingchart.plugins.tree.tree_defaults;for(s=0;s<e.length;s++)if(e[s].visible&&!e[s].fake){l=e[s];var X,I=Math.round(Z+(z-Z)*(l.value-zingchart.plugins.tree[n.id].minValue)/(zingchart.plugins.tree[n.id].maxValue-zingchart.plugins.tree[n.id].minValue)),D={};if(ZC._cp_(L.node,D),ZC._cp_({id:"node_"+l.id,cls:"zctreeshape","background-color":p[l.level%p.length],"hover-state":{"background-color":ZC.AO.JK(p[l.level%p.length],20)},x:l.x,y:l.y,size:I,dataTreeIndex:l.idx},D),l.children&&l.children.length?ZC._cp_(L["node[parent]"],D):ZC._cp_(L["node[leaf]"],D),l.collapsed&&ZC._cp_(L["node[collapsed]"],D),ZC._cp_(g.node||{},D),l.children&&l.children.length?ZC._cp_(g["node[parent]"],D):ZC._cp_(g["node[leaf]"],D),l.collapsed&&ZC._cp_(g["node[collapsed]"],D),ZC._cp_(g["node[container-"+l.container+"]"],D),ZC._cp_(g["node[level-"+l.level+"]"],D),l.parent&&ZC._cp_(g["node[parent-"+e[l.pidx].id+"]"],D),l.cls)for(var Y=l.cls.split(/\s/),U=0;U<Y.length;U++)ZC._cp_(g["node[cls-"+Y[U]+"]"],D);if(g.nodes&&g.nodes[l.id]&&ZC._cp_(g.nodes[l.id],D),D.label&&(D.label.x=l.x,D.label.y=l.y,L.node.label_jsRule&&ZC._cp_(L.node.label_jsRule(l,D,u),D.label)),D["js-rule"])try{var F=ZC.execFn(D["js-rule"].replace("javascript:","").replace("()",""),window,n.id,l,D);F&&ZC._cp_(F,D)}catch(ue){}l.style&&ZC._cp_(l.style,D);var R={decimals:null,short:!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(D,R),D.label&&D.label.text){for(X in D.label.text=D.label.text.replace(/%text/gi,l.text).replace(/%node-value/gi,zingchart.formatNumber(l["node-value"],R)).replace(/%value/gi,zingchart.formatNumber(l.value,R)),l)"data-"===X.substring(0,5)&&(D.label.text=D.label.text.replace(new RegExp("%"+X,"g"),l[X]));D.label.text=D.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(D.tooltip&&D.tooltip.text){for(X in ZC._cp_(D.tooltip,R),D.tooltip.text=D.tooltip.text.replace(/%text/gi,l.text).replace(/%node-value/gi,zingchart.formatNumber(l["node-value"],R)).replace(/%value/gi,zingchart.formatNumber(l.value,R)),l)"data-"===X.substring(0,5)&&(D.tooltip.text=D.tooltip.text.replace(new RegExp("%"+X,"g"),l[X]));D.tooltip.text=D.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}ee.push(D),A[l.id]=[],A[l.id][0]=ZC._i_(D.width||D.size||"0"),A[l.id][1]=ZC._i_(D.height||D.size2||D.size||"0"),A[l.id][2]=ZC._i_(D["offset-x"]||"0"),A[l.id][3]=ZC._i_(D["offset-y"]||"0")}for(s=0;s<$.length;s++){c=e[$[s][0]],l=e[$[s][1]];var te={};if(ZC._cp_(L.link,te),ZC._cp_({id:"link_"+l.idx+"_"+c.idx,cls:"zctreeshape",type:"line",flat:!0},te),ZC._cp_(g.link||{},te),ZC._cp_(g["link[level-"+c.level+"]"],te),ZC._cp_(g["link[container-"+c.container+"]"],te),ZC._cp_(g["link[parent-"+c.id+"]"],te),!(l.sibling&&(c=e[B[l.sibling]],te.aspect="sibling",ZC._cp_(g["link[sibling]"],te),c.fake&&l.fake||l.fake&&!l.children))){if(te["js-rule"])try{var re=ZC.execFn(te["js-rule"].replace("javascript:","").replace("()",""),window,n.id,l,c,te);re&&ZC._cp_(re,te)}catch(ue){}g.links&&g.links[c.id+"_"+l.id]&&ZC._cp_(g.links[c.id+"_"+l.id],te);var ne,ae,le=[],ce=l.x,se=l.y;A[l.id]&&(ce+=A[l.id][2],se+=A[l.id][3]);var de=c.x,oe=c.y;A[c.id]&&(de+=A[c.id][2],oe+=A[c.id][3]);var he=r;switch(te.aspect){case"sibling":le=[[ce,se],[de,oe]];break;case"side-before":case"side-after":"tree-down"===u||"tree-up"===u?(_||(he=ZC._a_(oe-se)),le=[[ce,se],[de+("side-after"===te.aspect?1:-1)*A[c.id][0]/3,se],[de+("side-after"===te.aspect?1:-1)*A[c.id][0]/3,oe+("tree-down"===u?1:-1)*he/E],[de+("side-after"===te.aspect?1:-1)*A[c.id][0]/3,oe+("tree-down"===u?1:-1)*he/E],[de+("side-after"===te.aspect?1:-1)*A[c.id][0]/3,oe]]):(_||(he=ZC._a_(de-ce)),le=[[ce,se],[ce,oe+("side-after"===te.aspect?-1:1)*A[c.id][1]/3],[de+("tree-right"===u?1:-1)*he/E,oe+("side-after"===te.aspect?-1:1)*A[c.id][1]/3],[de+("tree-right"===u?1:-1)*he/E,oe+("side-after"===te.aspect?-1:1)*A[c.id][1]/3],[de,oe+("side-after"===te.aspect?-1:1)*A[c.id][1]/3]]);break;case"side-between":le=[[ce,se],[de,se],[de,oe]];break;case"arc":if(j=ZC.AP.JT(de,oe,ce,se),le.push([de,oe]),"tree-up"===u||"tree-down"===u)ae=oe-j[1],le.push([de,j[1]+ae/E,j[0],j[1]]),le.push([ce,j[1]-ae/E,ce,se]);else if("tree-left"===u||"tree-right"===u)ne=de-j[0],le.push([j[0]+ne/E,oe,j[0],j[1]]),le.push([j[0]-ne/E,se,ce,se]);else if("tree-radial"===u&&c.level>0){var ge=ZC.AP.BM(W[l.container].x+W[l.container].width/2,W[l.container].y+W[l.container].height/2,c.radius+(l.radius-c.radius)/5,c.angle),pe=ZC.AP.BM(W[l.container].x+W[l.container].width/2,W[l.container].y+W[l.container].height/2,c.radius+4*(l.radius-c.radius)/5,l.angle);le.push([ge[0],ge[1],j[0],j[1]]),le.push([pe[0],pe[1],ce,se])}le.push([ce,se]);break;case"split":le.push([de,oe]),"tree-up"===u||"tree-down"===u?(_||(he=ZC._a_(oe-se)),le.push([de,oe+he/E*("tree-down"===u?1:-1)]),le.push([ce,oe+he/E*("tree-down"===u?1:-1)])):"tree-left"===u||"tree-right"===u?(_||(he=ZC._a_(de-ce)),le.push([de+he/E*("tree-right"===u?1:-1),oe]),le.push([de+he/E*("tree-right"===u?1:-1),se])):"tree-radial"===u&&(N=ZC.AP.BM(W[l.container].x+W[l.container].width/2,W[l.container].y+W[l.container].height/2,c.radius+(l.radius-c.radius)/2,c.angle),le.push([N[0],N[1]]),le.push([W[l.container].x+W[l.container].width/2,W[l.container].y+W[l.container].height/2,c.radius+(l.radius-c.radius)/2,c.angle,l.angle,c.angle>l.angle?1:0])),le.push([ce,se]);break;case"line":le=[[ce,se],[de,oe]]}te.points=le,ie.push(te)}}zingchart.exec(n.id,"removeobject",{type:"shape",cls:"zctreeshape"}),zingchart.exec(n.id,"addobject",{type:"shape",data:ie.concat(ee)})};if("graph"===u){if(be(),!zingchart.plugins.tree[n.id].navSetup){var we=function(){de=""};zingchart.bind(n.id,"shape_mousedown",function(e){if(0===e.ev.button&&0===e.shape.id.indexOf("node_")){var i=ZC.Q.MD(e.ev),t=ZC.A5("#"+n.id+"-top").offset();oe=[i[0]-t.left,i[1]-t.top],zingchart.bind(n.id,"mouseup",we),de=e.shape.id.replace("node_","")}}),zingchart.bind(n.id,"shape_mouseup",we),zingchart.bind(n.id,"mousemove",function(e){""!==de?(e.ev.preventDefault(),oe=[e.x,e.y],me(!0),(oe[0]<10||oe[0]>a.I-10||oe[1]<10||oe[1]>a.F-10)&&we(e)):"none"===e.target&&(l.LG(),l.A7&&l.A.A7&&l.A7.AM&&a.A7.onmouseout(e.ev))}),zingchart.bind(n.id,"beforedestroy",function(e){zingchart.plugins.tree[e.id]._render_graph_=null,zingchart.plugins.tree[e.id].navSetup=!1}),zingchart.plugins.tree[n.id].navSetup=!0}}else ye(),I||zingchart.plugins.tree[n.id].navSetup||(zingchart.bind(n.id,"shape_click",function(e){0===e.shape.id.indexOf("node_")&&window.setTimeout(function(){!function(e){for(var i=zingchart.plugins.tree[n.id].data,t=U(e,!0),r=0;r<t.length;r++)0===r?i[t[r]].collapsed=!i[t[r]].collapsed:i[t[r]].visible=!i[t[r]].visible}(e["data-tree-index"]),ye()},33)}),zingchart.plugins.tree[n.id].navSetup=!0)}};zingchart.bind(null,"gcomplete",function(e){a(e)}),zingchart.extendAPI("tree.addnode",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;r.id=r.id||"N"+ZC._r_(1e4,99999),r.text=r.text||r.id,r.type="node",r.value=r.value||1,r.container=r.container||0,r.group=r.group||0,zingchart.plugins.tree[e].data.push(r),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removenode",function(e,i){if(zingchart.plugins.tree[e]&&i.id){var t=!0;if(null!==ZC._n_(i.update)&&(t=ZC._b_(i.update)),!i.id)return;for(var r=zingchart.plugins.tree[e].data.length-1;r>=0;r--)"node"===zingchart.plugins.tree[e].data[r].type&&zingchart.plugins.tree[e].data[r].id===i.id?zingchart.plugins.tree[e].data.splice(r,1):("link"===zingchart.plugins.tree[e].data[r].type&&zingchart.plugins.tree[e].data[r].source===i.id||zingchart.plugins.tree[e].data[r].target===i.id)&&zingchart.plugins.tree[e].data.splice(r,1);t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.getdata",function(e){return zingchart.plugins.tree[e]?zingchart.plugins.tree[e].data:null}),zingchart.extendAPI("tree.set",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;null!==ZC._n_(r["attraction-constant"])&&(zingchart.plugins.tree[e].attractionConstant=ZC._f_(r["attraction-constant"])),null!==ZC._n_(r["repulsion-constant"])&&(zingchart.plugins.tree[e].repulsionConstant=ZC._i_(r["repulsion-constant"])),null!==ZC._n_(r["spring-length"])&&(zingchart.plugins.tree[e].springLength=ZC._f_(r["spring-length"])),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}return null}),zingchart.extendAPI("tree.addlink",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;if(!r.source||!r.target)return;for(var a=0,l=0;l<zingchart.plugins.tree[e].data.length;l++)"node"===zingchart.plugins.tree[e].data[l].type&&(zingchart.plugins.tree[e].data[l].id!==r.source&&zingchart.plugins.tree[e].data[l].id!==r.target||a++);if(2!==a)return;r.type="link",r.value=r.value||1,zingchart.plugins.tree[e].data.push(r),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removelink",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;if(!r.source||!r.target)return;for(var a=zingchart.plugins.tree[e].data.length-1;a>=0;a--)(zingchart.plugins.tree[e].data[a].source===r.source&&zingchart.plugins.tree[e].data[a].target===r.target||zingchart.plugins.tree[e].data[a].source===r.target&&zingchart.plugins.tree[e].data[a].target===r.source)&&zingchart.plugins.tree[e].data.splice(a,1);t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}})}}();