/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.6
*/
zingchart.setModule("sunburst"),function(){var e={},t={},a={},r={},i={},l={};zingchart.bind(null,"dataparse",function(n,o){var d,s,p,h,v,u,c,g,f,x=zingchart.getLoader(n.id);for(h=0,v=o.graphset.length;h<v;h++)if(o.graphset[h].type&&"sunburst"===o.graphset[h].type){e[n.id]=!0,r[n.id]||(r[n.id]={}),i[n.id]||(i[n.id]=-1),l[n.id]=[],t[n.id]||(t[n.id]=JSON.stringify(o));var _=o.graphset[h].type;o.graphset[h]["plugin-type"]=_;var b=o.graphset[h];zingchart.normalize(b),b.type="pie";var z=zingchart.getGraphInfo(x,o,h),C={};b.options&&(C=b.options[_]||b.options),ZC._todash_(C);var y=C.root||"";a[n.id]=y;var Z=ZC._i_(C.slice||"0"),m=ZC._f_(C["size-factor"]||"0.95"),A=ZC._i_(C.space||"0"),w=C.widths||[],k=C.palette||["#6A921F","#007FA3","#A62B02","#B79007","#563D02","#0B32A0","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],B=C["text-attr"]||"text",D=C["value-attr"]||"value";if(b.series=b.series||[],!(b.series instanceof Array)){var F=[],O={},E=function(e,t){var a=(e.text||e.name||e[B]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");O[a]?a+=O[a]++:O[a]=1;var r={id:a,text:e.text||e.name||e[B]||a,value:e.value||e.size||e[D],parent:t||""};if(F.push(r),e.children)for(var i=0;i<e.children.length;i++)E(e.children[i],a)};E(b.series,""),b.series=F}for(var J,L={},M=[].concat(b.series).reverse(),T=0,V=M.length,G=0;M.length&&V-- >=0;)for(d=M.length-1;d>=0;d--)for(J in u=(c=M[d]).id||"id"+T++,""===(f=c.parent||"")?(L[u]={id:u,level:0,parent:"",text:c.text||c.name||c[B]||u,value:c.value||c.size||c[D],children:[]},l[n.id].push(u),M.splice(d,1)):L[f]&&(L[f].children.push(u),L[u]={id:u,level:L[f].level+1,parent:f,text:c.text||c.name||c[B]||u,value:c.value||c.size||c[D],children:[]},M.splice(d,1),G=Math.max(G,L[u].level)),c)0===J.indexOf("data-")&&(L[u][J]=c[J]);var K=function(e,t){return t=t||[],L[e]&&""!==L[e].parent&&(t.push(L[e].parent),t=t.concat(K(L[e].parent))),t};if(""!==y){for(u in L)u!==y?(g=K(u),-1===ZC.AV(g,y)&&delete L[u]):(L[u]["up-parent"]=L[u].parent,L[u].parent="");var N=L[y].level;for(u in L)L[u].level-=N;G-=N}var S=0,I=0;for(p=0;p<=G;p++){if(0===p)for(u in L)0===L[u].level&&I++;for(u in L){var Q="";r[n.id][u]?Q=r[n.id][u]:(L[u].level===p&&(Q=0===L[u].level||1===L[u].level&&1===I?k[S++%k.length]:L[L[u].parent].color),r[n.id][u]=Q),L[u].color=Q}}var j=function(e){if(L[e]){if(null===ZC._n_(L[e].value))if(0===L[e].children.length)L[e].value=0;else{for(var t=0,a=0;a<L[e].children.length;a++)t+=j(L[e].children[a]);L[e].value=t}return parseFloat(L[e].value)}};for(u in L)L[u].value=j(u);if(-1===i[n.id]){for(u in L)if(0!==L[u].level&&(1!==L[u].level||1!==I)&&r[n.id][u]){g=K(u);var q=1===I?g[g.length-2]:g[g.length-1],H=1-L[u].value/L[q].value;r[n.id][u]=L[u].color=ZC.AO.QZ(L[u].color,40*H)}i[n.id]=1}var P=[],R=0;for(p=0;p<=G;p++){if(P[p]){var U=[];for(d=0;d<P[p].length;d++){var W=(c=L[P[p][d]]).children,X=0;for(s=0;s<W.length;s++)U.push(W[s]),X+=L[W[s]].value;if(X<c.value){var Y="sbfakeid"+R++;L[Y]={id:Y,parent:c.id,value:c.value-X,level:c.level,children:[],fake:!0,color:c.color},U.push(Y)}}P[p]=[].concat(U)}else for(u in P[p]=[],L)L[u].level===p&&P[p].push(u);p<G&&(P[p+1]=[].concat(P[p]))}o.graphset.splice(h,1);var $={};ZC._cp_(b,$),delete $.options,delete $.series,$["background-color"]="none",$.x=z.graph.x,$.y=z.graph.y,$.width=z.graph.width,$.height=z.graph.height,$.plot=$.plot||{},$.plot["value-box"]=$.plot["value-box"]||{},$.plot["value-box"].placement=$.plot["value-box"].placement||"radial",$.plot.detach=!1;var ee=m*(Math.min(z.plotarea.width,z.plotarea.height)/2-Z-G*A),te=ZC._i_(ee/(G+1));for(p=0;p<=G;p++){var ae={};if(ZC._cp_($,ae),p>0&&(delete ae.title,delete ae.subtitle,delete ae.source,delete ae.legend),ae.id=x.K+p,0===w.length)ae.plot.size=Z+te*(p+1)+A*p,ae.plot.slice=Z+te*p+A*p;else{for(var re=0,ie=0;ie<p;ie++)re+=w[ie]||te;ae.plot.slice=Z+re+A*p,re+=w[p]||te,ae.plot.size=Z+re+A*p}ae.series=[];var le=-1;for(d=0;d<P[p].length;d++){var ne=L[P[p][d]].text,oe=ne,de=L[P[p][d]].id;for(J in f=L[P[p][d]]["up-parent"]||L[P[p][d]].parent,0===p&&(""!==f||1===I&&l[n.id].length>1&&-1!==ZC.AV(l[n.id],de))&&(oe="\u25b2 "+oe),c={"data-l0items":I,"data-parent":f,"data-uid":de,"data-level":L[P[p][d]].level,"data-vbtext":oe,text:ne,values:[L[P[p][d]].value],"background-color":L[P[p][d]].color,"hover-state":{"background-color":ZC.AO.JK(L[P[p][d]].color,20)}},L[P[p][d]])0===J.indexOf("data-")&&(c[J]=L[P[p][d]][J]);L[P[p][d]].fake&&(c.visible=!1),L[P[p][d]].fake?-1===le?(ae.series.push(c),le=ae.series.length-1):ae.series[le].values[0]+=c.values[0]:(le=-1,ae.series.push(c))}o.graphset.splice(h,0,ae)}var se={};ZC._cp_(b,se),delete se.options,delete se.series,se.type="null",se.x=z.graph.x,se.y=z.graph.y,se.width=z.graph.width,se.height=z.graph.height,o.graphset.splice(h,0,se)}return o});var n=null;zingchart.bind(null,"node_click",function(e){if("touchend"===e.ev.type){if(null===n)return void(n=(new Date).getTime());if((new Date).getTime()-n>=300)return void(n=(new Date).getTime());n=null}else if(0!==e.ev.button)return;var r=zingchart.getLoader(e.id);if(r){var i=zingchart.getGraph(r,e.graphid);if(i&&"sunburst"===i.o["plugin-type"]){var o=JSON.parse(t[e.id]);(""!==e["data-parent"]||e["data-l0items"]>1||l[e.id].length>1&&-1!==ZC.AV(l[e.id],e["data-uid"]))&&(o.graphset[0].options=o.graphset[0].options||{},a[e.id]===e["data-uid"]?o.graphset[0].options.root=e["data-parent"]:o.graphset[0].options.root=e["data-uid"],zingchart.exec(e.id,"setdata",{data:o}))}}});zingchart.bind(null,"destroy",function(n){e[n.id]&&(delete e[n.id],t={},a={},r={},i={},l={})})}();